const page=document.querySelector(".page"),modalContainer=document.querySelector(".modal"),modalCloseButton=modalContainer.querySelector('.modal button[type="reset"]'),openButtons=document.querySelectorAll(".callback-button"),phoneInput=modalContainer.querySelector('.modal input[type="tel"]'),nameField=modalContainer.querySelector('input[type="text"]'),NUMBER_EXPRESSION=/[0-9]/,checkIfEscape=e=>"esc"===e.key||"Escape"===e.key,checkIfTab=e=>"Tab"===e.key,showModal=()=>{page.classList.add("page--with-modal"),modalContainer.classList.add("modal--opened"),nameField.focus()},closeModal=()=>{page.classList.remove("page--with-modal"),modalContainer.classList.remove("modal--opened")};modalContainer.addEventListener("click",(e=>{switch(!0){case e.target===modalCloseButton:page.classList.remove("page--with-modal"),modalContainer.classList.remove("modal--opened");break;case e.target===modalContainer:modalCloseButton.click()}})),openButtons.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),page.classList.add("page--with-modal"),modalContainer.classList.add("modal--opened"),nameField.focus()}))})),document.addEventListener("keydown",(e=>{checkIfEscape(e)&&(e.preventDefault(),modalCloseButton.click())})),phoneInput.addEventListener("input",(e=>{handleInput(e.target)}));const getCodeFrom=e=>{const t=e.slice(1,4);return t?`(${t}`:""},getFirstNumber=e=>{const t=e.slice(0,1);return t?`+${t}`:"+"},getNumber=e=>{const t=e.slice(4);return t?`)${t}`:""},handleInput=e=>{const t=[...e.value].filter((e=>NUMBER_EXPRESSION.test(e))).join(""),o=`${getFirstNumber(t)}${getCodeFrom(t)}${getNumber(t)}`;e.value=""!==e.value?o:""},isShiftKey=e=>e.shiftKey;document.addEventListener("keydown",(e=>{checkIfTab(e)&&(document.activeElement!==modalCloseButton||isShiftKey(e)||(e.preventDefault(),nameField.focus()),isShiftKey(e)&&document.activeElement===nameField&&(e.preventDefault(),modalCloseButton.focus()))}));export{handleInput};